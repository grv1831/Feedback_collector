<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 py-10 px-6">

  <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-md">
    <h1 class="text-2xl font-bold text-purple-700 mb-6 text-center">Welcome to Admin Dashboard</h1>


    <div class="flex flex-wrap justify-between gap-3 mb-6">
      <a href="/create-form" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
        Create New Form
      </a>

      <a href="/" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">
        Back to Home
      </a>

      <form method="POST" action="/logout">
        <button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
          Logout
        </button>
      </form>
    </div>


    <% if (forms.length===0) { %>
      <p class="text-gray-500 text-center">You haven't created any forms yet.</p>
      <% } else { %>
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Your Created Forms</h2>
        <ul class="space-y-4">
          <% forms.forEach(form=> { %>
            <li class="border rounded-lg p-4 bg-gray-50">
              <div class="flex justify-between items-center flex-wrap gap-4">
                <div>
                  <p class="font-medium text-gray-800">
                    <%= form.title %>
                  </p>
                  <p class="text-sm text-gray-500">Form ID: <%= form._id %>
                  </p>
                </div>

                <div class="flex flex-wrap gap-2">

                  <a href="/form/<%= form._id %>"
                    class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 text-sm">
                    Open
                  </a>


                  <a href="/form/<%= form._id %>/responses"
                    class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 text-sm">
                    View Responses
                  </a>


                  <a href="/form/<%= form._id %>/edit"
                    class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 text-sm">
                    Edit
                  </a>


                  <button onclick="copyToClipboard('<%= `http://localhost:3000/form/${form._id}` %>')"
                    class="bg-gray-300 text-gray-700 px-3 py-1 rounded hover:bg-gray-400 text-sm">
                    Copy Link
                  </button>

                </div>
              </div>
            </li>
            <% }) %>
        </ul>
        <% } %>
  </div>


  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(() => alert("ðŸ”— Form link copied to clipboard!"))
        .catch(err => console.error("Clipboard error", err));
    }
  </script>

</body>

</html>